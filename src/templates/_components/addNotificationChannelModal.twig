{% import "_includes/forms" as forms %}

<div id="add-notification-channel-modal" class="upsnap-modal hidden">
  <div class="upsnap-modal__overlay"></div>

  <div class="upsnap-modal__container">
    <div class="upsnap-modal__header">
      <h2 class="upsnap-modal__title">{{ "Add Notification Channel"|t('upsnap') }}</h2>
      <button type="button" class="upsnap-modal__close" aria-label="Close">&times;</button>
    </div>
    <div class="upsnap-modal__body">
        {# Hidden field for channel type #}
        <input type="hidden" id="channelType" name="channelType" value="email">

        {# Name field - common for all types #}
        {{ forms.textField({
            label: "Name"|t('upsnap'),
            id: 'channelName',
            name: 'channelName',
            required: true,
            placeholder: 'e.g., Primary Email Alerts'
        }) }}

        {# Email recipient field - shown for email type #}
        <div id="email-fields" class="channel-type-fields">
            {{ forms.textField({
                label: "Recipient Email"|t('upsnap'),
                id: 'channelRecipient',
                name: 'channelRecipient',
                required: true,
                type: 'email',
                placeholder: 'alerts@example.com'
            }) }}
        </div>

        {# Webhook URL field - shown for Discord/Google Chat #}
        <div id="webhook-fields" class="channel-type-fields hidden">
            {{ forms.textField({
                label: "Webhook URL"|t('upsnap'),
                id: 'channelWebhookUrl',
                name: 'channelWebhookUrl',
                required: true,
                type: 'url',
                placeholder: 'https://...'
            }) }}
            <p class="light" id="webhook-help-text">
                Enter the webhook URL for your integration.
            </p>
        </div>
      </div>

    <div class="upsnap-modal__footer">
      <button type="button" id="cancel-notification-channel-btn" class="btn cancel">
        {{ "Cancel"|t('upsnap') }}
      </button>
      <button type="button" id="save-notification-channel-btn" class="btn submit">
        {{ "Save Channel"|t('upsnap') }}
      </button>
    </div>
  </div>
</div>
