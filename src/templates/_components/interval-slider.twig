{% set unitToSeconds = {
    minute: 60,
    hour: 3600,
    day: 86400,
    second: 1
} %}

{% set normalized = [] %}
{% for p in partitions %}
    {% set normalized = normalized|merge([{
        label: p.label,
        seconds: p.value * unitToSeconds[p.unit]
    }]) %}
{% endfor %}

{% set descriptionText = description ?? 'Your monitor will be checked every {exact time}.' %}

<div class="field" style="width: 100%;">
    <div class="heading">
        <label>{{ label ?? 'Monitoring Interval' }}</label>
    </div>

    <div class="instructions">
        {% set beforeLabel = descriptionText|split('{exact time}')[0] %}
        {% set afterLabel = descriptionText|split('{exact time}')[1] ?? '' %}
        {{ beforeLabel }}<strong><span id="{{ id }}IntervalLabel"></span></strong>{{ afterLabel }}
    </div>

    <input
        type="range"
        class="upsnap-range"
        min="0"
        max="100"
        step="1"
        data-interval-slider
        data-target-input="{{ id }}MonitoringInterval"
        data-label="{{ id }}IntervalLabel"
        data-partitions='{{ normalized|json_encode|raw }}'
        data-min-monitor-interval-seconds="{{ minMonitorIntervalSeconds }}"
    />

    <input
        type="hidden"
        id="{{ id }}MonitoringInterval"
        name="{{ name }}"
        value="{{ value }}"
    />

    <div class="upsnap-range-labels">
        {% for p in normalized %}
            <span
                class="upsnap-range-tick {% if p.seconds < minMonitorIntervalSeconds %}disabled{% endif %}"
                data-seconds="{{ p.seconds }}"
            >
                {{ p.label }}
            </span>
        {% endfor %}
    </div>
</div>

