{% extends "_layouts/cp" %}
{% import "_includes/forms" as forms %}

{% block content %}
    <form method="post" accept-charset="UTF-8" data-saveshortcut>
        {{ csrfInput() }}
        {{ actionInput('upsnap/settings/save') }}
        {{ redirectInput('upsnap/settings') }}

        {{ forms.lightswitchField({
            label: "Enable Monitoring"|t('upsnap'),
            instructions: "Turn monitoring on or off"|t('upsnap'),
            id: 'enabled',
            name: 'enabled',
            on: settings.enabled,
            errors: settings.getErrors('enabled')
        }) }}

        {{ forms.textField({
            label: "Monitoring Interval"|t('upsnap'),
            instructions: "How often to check sites (in minutes)"|t('upsnap'),
            id: 'monitoringInterval',
            name: 'monitoringInterval',
            type: 'number',
            value: settings.monitoringInterval,
            min: 1,
            errors: settings.getErrors('monitoringInterval')
        }) }}

        {{ forms.textField({
            label: "Notification Email"|t('upsnap'),
            instructions: "Email address for monitoring alerts"|t('upsnap'),
            id: 'notificationEmail',
            name: 'notificationEmail',
            type: 'email',
            value: settings.notificationEmail,
            errors: settings.getErrors('notificationEmail')
        }) }}

        <div class="urls-field">
            <h2>{{ "URLs to Monitor"|t('upsnap') }}</h2>
            {{ forms.editableTableField({
                label: "URLs to Monitor"|t('upsnap'),
                instructions: "Add the URLs you want to monitor"|t('upsnap'),
                id: 'monitoringUrls',
                name: 'monitoringUrls',
                cols: [
                    {
                        type: 'url',
                        heading: 'URL'|t('upsnap'),
                        code: true
                    }
                ],
                rows: settings.monitoringUrls,
                addRowLabel: "Add URL"|t('upsnap'),
                errors: settings.getErrors('monitoringUrls')
            }) }}
        </div>

        <div class="buttons">
            <button type="submit" class="btn submit">{{ "Save"|t('upsnap') }}</button>
        </div>
    </form>
{% endblock %}